<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8"/>

<title>Sales Map</title>

<link rel="stylesheet"
href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<link rel="stylesheet"
href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css"/>

<style>

#map{
height:100vh;
}

#propertyCard{
position:absolute;
bottom:30px;
left:50%;
transform:translateX(-50%) translateY(200px);
width:320px;
background:white;
padding:15px;
border-radius:15px;
box-shadow:0 20px 40px rgba(0,0,0,0.3);
transition:0.6s;
z-index:999;
}

#propertyCard.show{
transform:translateX(-50%) translateY(0);
}

</style>

</head>

<div id="map"></div>

<div id="propertyCard">
<h3>Nirvana Define</h3>
<p>ğŸ¡ à¸šà¹‰à¸²à¸™à¹€à¸”à¸µà¹ˆà¸¢à¸§ 3 à¸«à¹‰à¸­à¸‡à¸™à¸­à¸™</p>
<p>ğŸ’° 8.9 à¸¥à¹‰à¸²à¸™à¸šà¸²à¸—</p>
<p>ğŸš† BTS à¸¨à¸£à¸µà¸™à¸„à¸£à¸´à¸™à¸—à¸£à¹Œ 2.1km</p>
<p>ğŸ« à¹€à¸•à¸£à¸µà¸¢à¸¡à¸™à¹‰à¸­à¸¡ 1.5km</p>
<p>ğŸ¥ à¸ªà¸¡à¸´à¸•à¸´à¹€à¸§à¸Š 3km</p>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

<script>

var map=L.map('map').setView([13.7367,100.5231],12);

L.tileLayer(
'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
).addTo(map);

fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQkOdRULyIfGZRazPhqFn4vQvsCBuxOC1SAEwwiiecwQ_GbFx8_aTCeWa8EqZLPphRGHOnClatbqeKt/pub?output=csv")
.then(res=>res.text())
.then(csv=>{
const rows=csv.split(/\r?\n/);
const headers=rows[0].split(",");

const latIndex=headers.indexOf("Latitude");
const lngIndex=headers.indexOf("Longitude");

rows.slice(1).forEach(row=>{

const cols=row.split(",");

const name=cols[0];
const type=cols[2];
const price=cols[3];

const lat=parseFloat(cols[latIndex]);
const lng=parseFloat(cols[lngIndex]);

if(!lat||!lng)return;

var marker=L.marker([lat,lng]).addTo(map);

marker.bindPopup(`
<b>${name}</b><br>
ğŸ  ${type}<br>
ğŸ’° ${price} MB
`);

});

</script>

</body>
</html>
